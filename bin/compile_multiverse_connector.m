clc

REPO_DIR            = 'D:\Windows11\Multiverse-Matlab-Connector';
SRC_DIR             = fullfile(REPO_DIR, 'src');
SRC_PATH            = fullfile(SRC_DIR, 'multiverse_connector.cpp');
LIB_DIR             = fullfile(REPO_DIR, 'lib');
EXT_DIR             = fullfile(REPO_DIR, 'ext');
MV_INCLUDE_DIR      = fullfile(EXT_DIR, 'multiverse_client', 'include');
JSON_INCLUDE_DIR    = fullfile(EXT_DIR, 'jsoncpp', 'include');
CPPZMQ_INCLUDE_DIR  = fullfile(EXT_DIR, 'cppzmq');
ZMQ_INCLUDE_DIR     = fullfile(EXT_DIR, 'libzmq', 'include');

mex(['-I' MV_INCLUDE_DIR], ...
    ['-I' JSON_INCLUDE_DIR], ...
    ['-I' CPPZMQ_INCLUDE_DIR], ...
    ['-I' ZMQ_INCLUDE_DIR], ...
    ['-L' LIB_DIR], ...
    '-lmultiverse_client', ...
    '-lmultiverse_client_json', ...
    SRC_PATH, ...
    fullfile(SRC_DIR, 'multiverse_client', 'multiverse_client_json.cpp'))